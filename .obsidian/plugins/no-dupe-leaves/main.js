/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var w=Object.create;var u=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var v=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var g=t=>u(t,"__esModule",{value:!0});var O=(t,e)=>{g(t);for(var r in e)u(t,r,{get:e[r],enumerable:!0})},P=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of y(e))!m.call(t,n)&&n!=="default"&&u(t,n,{get:()=>e[n],enumerable:!(r=k(e,n))||r.enumerable});return t},b=t=>P(g(u(t!=null?w(v(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);O(exports,{default:()=>f});var s=b(require("obsidian"));function d(t,e){let r=Object.keys(e).map(n=>C(t,n,e[n]));return r.length===1?r[0]:function(){r.forEach(n=>n())}}function C(t,e,r){let n=t[e],i=t.hasOwnProperty(e),o=r(n);return n&&Object.setPrototypeOf(o,n),Object.setPrototypeOf(a,o),t[e]=a,c;function a(...p){return o===n&&t[e]===a&&c(),o.apply(this,p)}function c(){t[e]===a&&(i?t[e]=n:delete t[e]),o!==n&&(o=n,Object.setPrototypeOf(a,n||Function))}}var h,f=class extends s.Plugin{async onload(){h=d(s.Workspace.prototype,{openLinkText(e){return function(r,n,i,o){if(i)return e&&e.apply(this,[r,n,i,o]);let a=V(r),c=!1;return app.workspace.iterateAllLeaves(p=>{let l=p.getViewState();l.type==="markdown"&&l.state?.file===a.path&&(app.workspace.setActiveLeaf(p,{focus:!0}),c=!0)}),c||(c=e&&e.apply(this,[r,n,i,o])),A(a),c}}})}onunload(){h()}};function A(t){let e=app.metadataCache.getCache(t.path),r=app.workspace.getActiveViewOfType(s.MarkdownView);if(t.heading){let n=e.headings.find(i=>i.heading===t.heading);n&&r.editor.setCursor(n.position.start.line)}else if(t.block){let n=e.blocks[t.block];n&&r.editor.setCursor(n.position.start.line)}}function V(t){let e=t.match(/\^(.*)$/),r=e?e[1]:void 0;t=t.replace(/(\^.*)$/,"");let n=t.match(/#(.*)$/),i=n?n[1]:void 0;return t=t.replace(/(#.*)$/,""),{path:app.metadataCache.getFirstLinkpathDest((0,s.getLinkpath)(t),app.workspace.getActiveFile()?.path).path,heading:i,block:r}}
